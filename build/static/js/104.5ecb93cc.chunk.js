(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[104],{1591:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a(481),n=a(7),i=a(129),s=a(89),l=a(492),d=a(130),o=a(613),u=a(501),h=a(491),b=a(640),m=a(9);t.default=()=>{const e=Object(n.f)(),[t]=Object(i.d)(),{updateAccountController:a,getActionPlans:T,getActionPlansLoading:g,actionPlans:A,getActionTriggers:j,getActionTriggersLoading:p,actionTriggers:f,getAccountById:D,loadings:I}=Object(o.a)(),O=Object(d.c)((e=>e.app.selectedTpId));return Object(r.useEffect)((()=>{let a=t.get("entity_id");if(a){if(O){let e=a.split(":")[1],t=a.split(":")[0];D(e,t),T(),j()}}else e("/rules/actions")}),[O]),Object(m.jsxs)(r.Fragment,{children:[Object(m.jsx)(c.a,{title:"Update Account",data:[{title:"Update Account"}]}),Object(m.jsx)(s.H,{onSubmit:e=>{e.preventDefault(),window.scroll({top:0,behavior:"smooth"}),a.handleSubmit()},className:"d-flex flex-column align-items-center",children:Object(m.jsxs)(s.l,{className:"w-100",children:[Object(m.jsx)(s.p,{className:"border-bottom",children:Object(m.jsx)(s.v,{children:"New Account Form"})}),Object(m.jsx)(s.m,{className:"pt-2",children:Object(m.jsxs)(s.ib,{children:[Object(m.jsxs)(s.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(m.jsx)(s.N,{className:"form-label",for:"mobile",children:"Account"}),Object(m.jsx)(s.K,{id:"Account",name:"Account",disabled:!0,value:a.values.Account,onChange:a.handleChange,invalid:a.touched.Account&&a.errors.Account}),a.touched.Account&&a.errors.Account?Object(m.jsx)(s.I,{children:a.errors.Account}):null]}),Object(m.jsxs)(s.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(m.jsx)(s.N,{className:"form-label",for:"mobile",children:"Tenant"}),Object(m.jsx)(s.K,{id:"Tenant",name:"Tenant",disabled:!0,value:a.values.Tenant,onChange:a.handleChange,invalid:a.touched.Tenant&&a.errors.Tenant}),a.touched.Tenant&&a.errors.Tenant?Object(m.jsx)(s.I,{children:a.errors.Tenant}):null]}),Object(m.jsxs)(s.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(m.jsx)(s.N,{className:"form-label",for:"mobile",children:"ActionPlanIDs"}),Object(m.jsx)(u.a,{placeholder:"Select ActionPlanIDs",isLoading:g,isClearable:!1,options:A,className:"react-select ".concat(a.touched.ActionPlanIDs&&a.errors.ActionPlanIDs?"form_error":""),classNamePrefix:"select",theme:h.h,value:a.values.ActionPlanIDs,onChange:e=>{a.setFieldValue("ActionPlanIDs",e)}}),a.touched.ActionPlanIDs&&a.errors.ActionPlanIDs?Object(m.jsx)(s.I,{style:{display:"block"},children:"The ActionPlanIDs field is required."}):null]}),Object(m.jsxs)(s.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(m.jsx)(s.N,{className:"form-label",for:"mobile",children:"ActionTriggerIDs"}),Object(m.jsx)(u.a,{placeholder:"Select ActionTriggerIDs",isLoading:p,isClearable:!1,options:f,className:"react-select ".concat(a.touched.ActionTriggerIDs&&a.errors.ActionTriggerIDs?"form_error":""),classNamePrefix:"select",theme:h.h,value:a.values.ActionTriggerIDs,onChange:e=>{a.setFieldValue("ActionTriggerIDs",e)}}),a.touched.ActionTriggerIDs&&a.errors.ActionTriggerIDs?Object(m.jsx)(s.I,{style:{display:"block"},children:"The ActionTriggerIDs field is required."}):null]}),Object(m.jsxs)(s.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(m.jsx)(s.N,{className:"form-label",for:"mobile",children:"Balances"}),Object(m.jsx)(u.a,{placeholder:"Select Balances",isClearable:!1,options:b.a,isMulti:!0,className:"react-select ".concat(a.touched.Balances&&a.errors.Balances?"form_error":""),classNamePrefix:"select",theme:h.h,value:a.values.Balances,onChange:e=>{a.setFieldValue("Balances",e)}}),a.touched.Balances&&a.errors.Balances?Object(m.jsx)(s.I,{style:{display:"block"},children:"The Balances field is required."}):null]})]})}),Object(m.jsx)(s.n,{className:"border-top d-flex justify-content-center",children:Object(m.jsx)(l.a,{loading:I.createAccount||I.createBalance,type:"submit",color:"primary",style:{minWidth:150},children:"Submit"})})]})})]})}},481:function(e,t,a){"use strict";var r=a(1),c=a(129),n=a(2),i=a.n(n),s=a(89),l=a(9);t.a=e=>{const{data:t,title:a}=e;return Object(l.jsx)("div",{className:"content-header row",children:Object(l.jsx)("div",{className:"content-header-left col-md-9 col-12 mb-2 w-100",children:Object(l.jsx)("div",{className:"row breadcrumbs-top",children:Object(l.jsxs)("div",{className:"col-12",children:[a?Object(l.jsx)("h2",{className:"content-header-title float-start mb-0",children:a}):"",Object(l.jsx)("div",{className:"breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12",children:Object(l.jsxs)(s.g,{children:[Object(l.jsx)(s.h,{tag:"li",children:Object(l.jsx)(c.b,{to:"/",children:"Dashboard"})}),t.map(((e,a)=>{const n=e.link?c.b:r.Fragment,d=t.length-1===a;return Object(l.jsx)(s.h,{tag:"li",active:!d,className:i()({"text-primary":!d}),children:Object(l.jsx)(n,{...e.link?{to:e.link}:{},children:e.title})},a)}))]})})]})})})})}},483:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return d}));var r=a(490);const c=r.b({TPid:r.d().required("The TPid field is required."),ID:r.d().required("The ID field is required.")}),n=r.b({TPid:r.d().required("The TPid field is required."),Tenant:r.d().required("The Tenant field is required."),ID:r.d().required("The ID field is required."),ActivationTime:r.d().required("The ActivationTime field is required."),ExpiryTime:r.d().required("The ExpiryTime field is required."),RunID:r.d().required("The RunID field is required."),FilterIDs:r.a().min(1).required("The FilterIDs field is required."),AttributeIDs:r.a().min(1).required("The AttributeIDs field is required.")}),i=r.b({TPid:r.d().required("The TPid field is required."),ID:r.d().required("The ID field is required."),MonthDays:r.d().required("The MonthDays field is required."),Months:r.d().required("The Months field is required."),Time:r.d().required("The Time field is required."),WeekDays:r.d().required("The WeekDays field is required."),Years:r.d().required("The Years field is required.")}),s=r.b({TPid:r.d().required("The TPid field is required."),ID:r.d().required("The ID field is required."),Prefixes:r.a().min(1).required("The Prefixes field is required.")}),l=r.b({TPid:r.d().required("The TPid field is required."),LoadId:r.d().required("The LoadId field is required."),Tenant:r.d().required("The Tenant field is required."),Category:r.d().required("The Category field is required."),Subject:r.d().required("The Subject field is required.")}),d=r.b({Account:r.d().required("The Account field is required."),Tenant:r.d().required("The Tenant field is required."),ActionPlanIDs:r.b().nullable(!1).required("The ActionPlanIDs field is required."),ActionTriggerIDs:r.b().nullable(!1).required("The ActionTriggerIDs field is required."),Balances:r.a().min(1,"You should select a balance.").required("You should select a balance.")})},613:function(e,t,a){"use strict";var r=a(494),c=a(1),n=a(131),i=a(493),s=a(7),l=a(483),d=a(130),o=a(147);t.a=()=>{const e=Object(d.b)(),t=Object(s.f)(),{httpService:a}=Object(i.a)(),[u,h]=Object(c.useState)({getAccounts:!1,createAccount:!1,updateAccount:!1,createBalance:!1,deleteAccount:!1,getAccountById:!1}),[b,m]=Object(c.useState)(!1),[T,g]=Object(c.useState)(!1),[A,j]=Object(c.useState)([]),[p,f]=Object(c.useState)([]),[D,I]=Object(c.useState)({Tenant:"cgrates.org"}),[O,v]=Object(c.useState)([]),x=Object(d.c)((e=>e.app.selectedTpId)),y=Object(r.a)({initialValues:{Tenant:"",Account:"",ActionPlanIDs:null,ActionPlansOverwrite:!1,ActionTriggerIDs:null,ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1,Balances:null},validationSchema:l.a,onSubmit:e=>{q(e)}}),q=async e=>{let t={Tenant:e.Tenant,Account:e.Account,ActionPlanIDs:[e.ActionPlanIDs.value],ActionPlansOverwrite:!1,ActionTriggerIDs:[e.ActionTriggerIDs.value],ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1};try{h({...u,createAccount:!0});const r=await a.post("",{method:"APIerSv2.SetAccount",params:[t]});h({...u,createAccount:!1}),200===r.status&&P(e)}catch({err:r,response:c}){h({...u,createAccount:!1})}},P=async e=>{let r=[];e.Balances.map((e=>{r.push(e.value)}));let c={method:"APIerSv1.SetBalances",params:[{Tenant:e.Tenant,Account:e.Account,Balances:r}],id:6};try{h({...u,createBalance:!0});const e=await a.post("",c);h({...u,createBalance:!1}),200===e.status&&(n.b.success("Successfully Created!"),t("/admin/accounts"))}catch({err:i,response:s}){h({...u,createBalance:!1})}},B=Object(r.a)({initialValues:{Tenant:"",Account:"",ActionPlanIDs:null,ActionPlansOverwrite:!1,ActionTriggerIDs:null,ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1,Balances:null},validationSchema:l.a,onSubmit:e=>{q(e)}});return{getAccounts:async e=>{let t={Tenant:""};D.Tenant.length>0&&!e&&(t.Tenant=D.Tenant);try{h({...u,getAccounts:!0});const e=await a.post("",{method:"APIerSv2.GetAccounts",params:[t]});h({...u,getAccounts:!1}),e.data.result?v(e.data.result):v([])}catch({err:r,response:c}){h({...u,getAccounts:!1})}},getActionPlans:async()=>{let e=[];try{var t,r;m(!0);const c=await a.post("",{method:"APIerSv1.GetTPActionPlanIds",params:[{TPid:x}]});m(!1),null===c||void 0===c||null===(t=c.data)||void 0===t||null===(r=t.result)||void 0===r||r.map((t=>{e.push({label:t,value:t})})),j(e)}catch({err:c,response:n}){m(!1)}},getActionTriggers:async()=>{let e=[];try{var t,r;g(!0);const c=await a.post("",{method:"APIerSv1.GetTPActionTriggerIds",params:[{TPid:x}]});g(!1),null===c||void 0===c||null===(t=c.data)||void 0===t||null===(r=t.result)||void 0===r||r.map((t=>{e.push({label:t,value:t})})),f(e)}catch({err:c,response:n}){g(!1)}},getAccount:async(t,r)=>{try{e(Object(o.d)(!0));const c=await a.post("",{method:"APIerSv2.GetAccount",params:[{Tenant:t,Account:r}]});e(Object(o.d)(!1)),c.data.result&&e(Object(o.c)(c.data.result))}catch({err:c,response:n}){e(Object(o.d)(!1))}},getAccountById:async(e,r)=>{let c=[];try{h({...u,getAccountById:!0});const n=await a.post("",{method:"APIerSv2.GetAccount",params:[{Tenant:r,Account:e}]});h({...u,getAccountById:!1}),n.data.result?(console.log(n.data.result),B.setFieldValue("Tenant",n.data.result.ID.split(":")[0]),B.setFieldValue("Account",n.data.result.ID.split(":")[1]),B.setFieldValue("ActionTriggerIDs",{label:n.data.result.ActionTriggers[0].ID,value:n.data.result.ActionTriggers[0].ID}),n.data.result.BalanceMap&&(Object.keys(n.data.result.BalanceMap).map((e=>{"*data"===e?c.push({id:9430430*Math.random(),label:"1Gigabyte Data Monthly",value:n.data.result.BalanceMap[e][0]}):"*monetary"===e?c.push({id:9430430*Math.random(),label:"100000 Unit Monetary",value:n.data.result.BalanceMap[e][0]}):"*voice"===e&&c.push({id:9430430*Math.random(),label:"10 Hour Voice Monthly",value:n.data.result.BalanceMap[e][0]})})),B.setFieldValue("Balances",c))):t("/admin/accounts")}catch({err:n,response:i}){h({...u,getAccountById:!1})}},createAccountController:y,updateAccountController:B,listData:O,loadings:u,actionPlans:A,actionTriggers:p,getActionPlansLoading:b,getActionTriggersLoading:T,filters:D,setFilters:I}}},640:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(535),c=a.n(r);const n=[{id:9430430*Math.random(),label:"1Gigabyte Data Monthly",value:{BalanceType:"*data",Value:1048576e5,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120002",ID:"1G_DATA",ExpiryTime:c()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:"data",SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}},{id:9430430*Math.random(),label:"10 Hour Voice Monthly",value:{BalanceType:"*voice",Value:36e3,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120002",ID:"10HVoice",ExpiryTime:c()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:"voice",SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}},{id:9430430*Math.random(),label:"100000 Unit Monetary",value:{BalanceType:"*monetary",Value:1e5,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120003",ID:"100KMoney",ExpiryTime:c()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:null,SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}}]}}]);
//# sourceMappingURL=104.5ecb93cc.chunk.js.map