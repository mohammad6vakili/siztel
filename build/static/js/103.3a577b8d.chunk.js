(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[103],{1614:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(499),c=r(96),i=r(509),s=r(636),l=r(518),o=r(510),u=r(603),d=r(136),b=r(11);t.default=function(){var e=Object(s.a)(),t=e.getActionPlans,r=e.getActionTriggers,h=e.createAccountController,j=e.actionPlans,m=e.actionTriggers,f=e.loadings,p=e.getActionPlansLoading,T=e.getActionTriggersLoading,g=Object(d.c)((function(e){return e.app.selectedTpId}));return Object(a.useEffect)((function(){g&&(t(),r())}),[g]),Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(n.a,{title:"New Account",data:[{title:"New Account"}]}),Object(b.jsx)(c.H,{onSubmit:function(e){e.preventDefault(),window.scroll({top:0,behavior:"smooth"}),h.handleSubmit()},className:"d-flex flex-column align-items-center",children:Object(b.jsxs)(c.l,{className:"w-100",children:[Object(b.jsx)(c.p,{className:"border-bottom",children:Object(b.jsx)(c.v,{children:"New Account Form"})}),Object(b.jsx)(c.m,{className:"pt-2",children:Object(b.jsxs)(c.ib,{children:[Object(b.jsxs)(c.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(b.jsx)(c.N,{className:"form-label",for:"mobile",children:"Account"}),Object(b.jsx)(c.K,{id:"Account",name:"Account",value:h.values.Account,onChange:h.handleChange,invalid:h.touched.Account&&h.errors.Account}),h.touched.Account&&h.errors.Account?Object(b.jsx)(c.I,{children:h.errors.Account}):null]}),Object(b.jsxs)(c.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(b.jsx)(c.N,{className:"form-label",for:"mobile",children:"Tenant"}),Object(b.jsx)(c.K,{id:"Tenant",name:"Tenant",value:h.values.Tenant,onChange:h.handleChange,invalid:h.touched.Tenant&&h.errors.Tenant}),h.touched.Tenant&&h.errors.Tenant?Object(b.jsx)(c.I,{children:h.errors.Tenant}):null]}),Object(b.jsxs)(c.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(b.jsx)(c.N,{className:"form-label",for:"mobile",children:"ActionPlanIDs"}),Object(b.jsx)(l.a,{placeholder:"Select ActionPlanIDs",isLoading:p,isClearable:!1,options:j,className:"react-select ".concat(h.touched.ActionPlanIDs&&h.errors.ActionPlanIDs?"form_error":""),classNamePrefix:"select",theme:o.h,value:h.values.ActionPlanIDs,onChange:function(e){h.setFieldValue("ActionPlanIDs",e)}}),h.touched.ActionPlanIDs&&h.errors.ActionPlanIDs?Object(b.jsx)(c.I,{style:{display:"block"},children:"The ActionPlanIDs field is required."}):null]}),Object(b.jsxs)(c.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(b.jsx)(c.N,{className:"form-label",for:"mobile",children:"ActionTriggerIDs"}),Object(b.jsx)(l.a,{placeholder:"Select ActionTriggerIDs",isLoading:T,isClearable:!1,options:m,className:"react-select ".concat(h.touched.ActionTriggerIDs&&h.errors.ActionTriggerIDs?"form_error":""),classNamePrefix:"select",theme:o.h,value:h.values.ActionTriggerIDs,onChange:function(e){h.setFieldValue("ActionTriggerIDs",e)}}),h.touched.ActionTriggerIDs&&h.errors.ActionTriggerIDs?Object(b.jsx)(c.I,{style:{display:"block"},children:"The ActionTriggerIDs field is required."}):null]}),Object(b.jsxs)(c.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(b.jsx)(c.N,{className:"form-label",for:"mobile",children:"Balances"}),Object(b.jsx)(l.a,{placeholder:"Select Balances",isClearable:!1,options:u.a,isMulti:!0,className:"react-select ".concat(h.touched.Balances&&h.errors.Balances?"form_error":""),classNamePrefix:"select",theme:o.h,value:h.values.Balances,onChange:function(e){h.setFieldValue("Balances",e)}}),h.touched.Balances&&h.errors.Balances?Object(b.jsx)(c.I,{style:{display:"block"},children:"The Balances field is required."}):null]})]})}),Object(b.jsx)(c.n,{className:"border-top d-flex justify-content-center",children:Object(b.jsx)(i.a,{loading:f.createAccount||f.createBalance,type:"submit",color:"primary",style:{minWidth:150},children:"Submit"})})]})})]})}},499:function(e,t,r){"use strict";var a=r(21),n=r(1),c=r(135),i=r(2),s=r.n(i),l=r(96),o=r(11);t.a=function(e){var t=e.data,r=e.title;return Object(o.jsx)("div",{className:"content-header row",children:Object(o.jsx)("div",{className:"content-header-left col-md-9 col-12 mb-2 w-100",children:Object(o.jsx)("div",{className:"row breadcrumbs-top",children:Object(o.jsxs)("div",{className:"col-12",children:[r?Object(o.jsx)("h2",{className:"content-header-title float-start mb-0",children:r}):"",Object(o.jsx)("div",{className:"breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12",children:Object(o.jsxs)(l.g,{children:[Object(o.jsx)(l.h,{tag:"li",children:Object(o.jsx)(c.b,{to:"/",children:"Dashboard"})}),t.map((function(e,r){var i=e.link?c.b:n.Fragment,u=t.length-1===r;return Object(o.jsx)(l.h,{tag:"li",active:!u,className:s()({"text-primary":!u}),children:Object(o.jsx)(i,Object(a.a)(Object(a.a)({},e.link?{to:e.link}:{}),{},{children:e.title}))},r)}))]})})]})})})})}},501:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return o})),r.d(t,"g",(function(){return u}));var a=r(508),n=a.b({TPid:a.d().required("The TPid field is required."),ID:a.d().required("The ID field is required.")}),c=a.b({TPid:a.d().required("The TPid field is required."),Tenant:a.d().required("The Tenant field is required."),ID:a.d().required("The ID field is required."),ActivationTime:a.d().required("The ActivationTime field is required."),ExpiryTime:a.d().required("The ExpiryTime field is required."),RunID:a.d().required("The RunID field is required."),FilterIDs:a.a().min(1).required("The FilterIDs field is required."),AttributeIDs:a.a().min(1).required("The AttributeIDs field is required.")}),i=a.b({TPid:a.d().required("The TPid field is required."),ID:a.d().required("The ID field is required."),MonthDays:a.d().required("The MonthDays field is required."),Months:a.d().required("The Months field is required."),Time:a.d().required("The Time field is required."),WeekDays:a.d().required("The WeekDays field is required."),Years:a.d().required("The Years field is required.")}),s=a.b({TPid:a.d().required("The TPid field is required."),ID:a.d().required("The ID field is required."),Prefixes:a.a().min(1).required("The Prefixes field is required.")}),l=a.b({TPid:a.d().required("The TPid field is required."),LoadId:a.d().required("The LoadId field is required."),Tenant:a.d().required("The Tenant field is required."),Category:a.d().required("The Category field is required."),Subject:a.d().required("The Subject field is required.")}),o=a.b({Account:a.d().required("The Account field is required."),Tenant:a.d().required("The Tenant field is required."),ActionPlanIDs:a.b().nullable(!1).required("The ActionPlanIDs field is required."),ActionTriggerIDs:a.b().nullable(!1).required("The ActionTriggerIDs field is required."),Balances:a.a().min(1,"You should select a balance.").required("You should select a balance.")}),u=a.b({Account:a.d().required("The Account field is required."),Tenant:a.d().required("The Tenant field is required."),ActionTriggerIDs:a.b().nullable(!1).required("The ActionTriggerIDs field is required."),Balances:a.a().min(1,"You should select a balance.").required("You should select a balance.")})},603:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(554),n=r.n(a),c=[{label:"1Gigabyte Data Monthly",value:{BalanceType:"*data",Value:1048576e5,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120002",ID:"1G_DATA",ExpiryTime:n()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:"data",SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}},{label:"10 Hour Voice Monthly",value:{BalanceType:"*voice",Value:36e3,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120002",ID:"10HVoice",ExpiryTime:n()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:"voice",SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}},{label:"100000 Unit Monetary",value:{BalanceType:"*monetary",Value:1e5,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120003",ID:"100KMoney",ExpiryTime:n()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:null,SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}}]},636:function(e,t,r){"use strict";var a=r(21),n=r(4),c=r(7),i=r(16),s=r(512),l=r(1),o=r(138),u=r(511),d=r(9),b=r(501),h=r(136),j=r(159),m=r(603);t.a=function(){var e=Object(h.b)(),t=Object(d.f)(),r=Object(u.a)().httpService,f=Object(l.useState)({getAccounts:!1,createAccount:!1,updateAccount:!1,createBalance:!1,deleteAccount:!1,getAccountById:!1}),p=Object(i.a)(f,2),T=p[0],g=p[1],O=Object(l.useState)(!1),A=Object(i.a)(O,2),v=A[0],x=A[1],D=Object(l.useState)(!1),I=Object(i.a)(D,2),q=I[0],P=I[1],y=Object(l.useState)([]),B=Object(i.a)(y,2),S=B[0],N=B[1],w=Object(l.useState)([]),k=Object(i.a)(w,2),C=k[0],Y=k[1],M=Object(l.useState)({Tenant:"cgrates.org"}),V=Object(i.a)(M,2),F=V[0],E=V[1],G=Object(l.useState)([]),H=Object(i.a)(G,2),L=H[0],R=H[1],W=Object(h.c)((function(e){return e.app.selectedTpId})),U=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t,a,c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,x(!0),e.next=5,r.post("",{method:"APIerSv1.GetTPActionPlanIds",params:[{TPid:W}]});case 5:i=e.sent,x(!1),null===i||void 0===i||null===(a=i.data)||void 0===a||null===(c=a.result)||void 0===c||c.map((function(e){t.push({label:e,value:e})})),N(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.err,e.t0.response,x(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t,a,c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,P(!0),e.next=5,r.post("",{method:"APIerSv1.GetTPActionTriggerIds",params:[{TPid:W}]});case 5:i=e.sent,P(!1),null===i||void 0===i||null===(a=i.data)||void 0===a||null===(c=a.result)||void 0===c||c.map((function(e){t.push({label:e,value:e})})),Y(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.err,e.t0.response,P(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),K=Object(s.a)({initialValues:{Tenant:"",Account:"",ActionPlanIDs:null,ActionPlansOverwrite:!1,ActionTriggerIDs:null,ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1,Balances:null},validationSchema:b.a,onSubmit:function(e){Z(e)}}),Z=function(){var e=Object(c.a)(Object(n.a)().mark((function e(t){var c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={Tenant:t.Tenant,Account:t.Account,ActionPlanIDs:[],ActionPlansOverwrite:!1,ActionTriggerIDs:[t.ActionTriggerIDs.value],ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1},t.ActionPlanIDs&&c.ActionPlanIDs.push(t.ActionPlanIDs.value),e.prev=2,g(Object(a.a)(Object(a.a)({},T),{},{createAccount:!0})),e.next=6,r.post("",{method:"APIerSv2.SetAccount",params:[c]});case 6:i=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{createAccount:!1})),200===i.status&&J(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{createAccount:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(Object(n.a)().mark((function e(c){var i,s,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],c.Balances.map((function(e){i.push(e.value)})),s={method:"APIerSv1.SetBalances",params:[{Tenant:c.Tenant,Account:c.Account,Balances:i}],id:6},e.prev=3,g(Object(a.a)(Object(a.a)({},T),{},{createBalance:!0})),e.next=7,r.post("",s);case 7:l=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{createBalance:!1})),200===l.status&&(o.b.success("Successfully Created!"),t("/admin/accounts")),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{createBalance:!1}));case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(Object(n.a)().mark((function e(t){var c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={Tenant:""},F.Tenant.length>0&&!t&&(c.Tenant=F.Tenant),e.prev=2,g(Object(a.a)(Object(a.a)({},T),{},{getAccounts:!0})),e.next=6,r.post("",{method:"APIerSv2.GetAccounts",params:[c]});case 6:i=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{getAccounts:!1})),i.data.result?R(i.data.result):R([]),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{getAccounts:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var t=Object(c.a)(Object(n.a)().mark((function t(a,c){var i;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(Object(j.d)(!0)),t.next=4,r.post("",{method:"APIerSv2.GetAccount",params:[{Tenant:a,Account:c}]});case 4:i=t.sent,e(Object(j.d)(!1)),i.data.result&&e(Object(j.c)(i.data.result)),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.err,t.t0.response,e(Object(j.d)(!1));case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(Object(n.a)().mark((function e(c,i){var s,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.prev=1,g(Object(a.a)(Object(a.a)({},T),{},{getAccountById:!0})),e.next=5,r.post("",{method:"APIerSv2.GetAccount",params:[{Tenant:i,Account:c}]});case 5:l=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{getAccountById:!1})),l.data.result?($.setFieldValue("Tenant",l.data.result.ID.split(":")[0]),$.setFieldValue("Account",l.data.result.ID.split(":")[1]),$.setFieldValue("ActionTriggerIDs",{label:l.data.result.ActionTriggers[0].ID,value:l.data.result.ActionTriggers[0].ID}),l.data.result.BalanceMap&&(Object.keys(l.data.result.BalanceMap).map((function(e){m.a.find((function(t){t.value.BalanceType===e&&s.push(t)}))})),$.setFieldValue("Balances",s))):t("/admin/accounts"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{getAccountById:!1}));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}(),$=Object(s.a)({initialValues:{Tenant:"",Account:"",ActionPlansOverwrite:!1,ActionTriggerIDs:null,ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1,Balances:null},validationSchema:b.g,onSubmit:function(e){Z(e)}});return{getAccounts:z,getActionPlans:U,getActionTriggers:_,getAccount:Q,getAccountById:X,createAccountController:K,updateAccountController:$,listData:L,loadings:T,actionPlans:S,actionTriggers:C,getActionPlansLoading:v,getActionTriggersLoading:q,filters:F,setFilters:E}}}}]);
//# sourceMappingURL=103.3a577b8d.chunk.js.map