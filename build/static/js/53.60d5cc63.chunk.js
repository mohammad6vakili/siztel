(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[53],{1522:function(e){e.exports=JSON.parse("{}")},1705:function(e,t,r){"use strict";r.r(t);var i=r(1),a=r(481),s=r(644),d=r(484),n=r(486),l=r(488),c=r.n(l),o=r(89),u=r(7),h=r(130),b=r(145),g=r(9);var j=e=>{let{row:t}=e;const r=Object(u.f)(),i=Object(h.b)();return Object(g.jsxs)("div",{className:"d-flex align-items-center",children:[Object(g.jsx)(o.i,{onClick:()=>{i(Object(b.c)(t.ID)),i(Object(b.b)(1))},style:{marginRight:8},color:"danger",size:"sm",children:"Delete"}),Object(g.jsx)(o.i,{onClick:()=>{r("/rules/chargers/update?entity_id=".concat(t.ID))},style:{marginRight:8},color:"primary",size:"sm",children:"Update"})]})};const T=[{name:"ID",minWidth:"100px",selector:e=>e.ID},{name:"Operations",minWidth:"100px",selector:e=>e.ID,cell:e=>Object(g.jsx)(j,{row:e})}];r(1522);var m=r(511);t.default=()=>{const e=Object(h.b)(),t=Object(u.f)(),{skin:r}=Object(d.a)(),{getChargers:l,deleteEntity:j,listData:y,loadings:I}=Object(s.a)(),p=Object(h.c)((e=>e.chargers.deleteModal)),v=Object(h.c)((e=>e.chargers.selectedEntity)),D=Object(h.c)((e=>e.app.getAllTpIdsLoading)),O=Object(h.c)((e=>e.app.selectedTpId));return Object(i.useEffect)((()=>{O&&l()}),[O]),Object(g.jsxs)(i.Fragment,{children:[Object(g.jsxs)(o.B,{className:"position-relative",xs:12,children:[Object(g.jsx)(a.a,{title:"Chargers",data:[{title:"Chargers"}]}),Object(g.jsx)(o.i,{onClick:()=>t("/rules/chargers/new"),color:"primary",style:{position:"absolute",right:0,top:0},children:"New Charger"})]}),Object(g.jsxs)("div",{className:"react-dataTable mv_datatable_container",children:[D?Object(g.jsx)("div",{style:{width:"100%",height:"50vh"},className:"d-flex justify-content-center align-items-center",children:"Loading TPIds..."}):null,!D&&I.getChargers?Object(g.jsx)("div",{className:"datatable_loading_cover",children:Object(g.jsx)(n.a,{})}):null,D||I.getChargers?null:Object(g.jsx)(i.Fragment,{children:Object(g.jsx)(c.a,{noDataComponent:I.getChargers?"":Object(g.jsx)("div",{style:{margin:"24px 0"},children:"No Charger Founded!"}),noHeader:!0,columns:T,className:"react-dataTable",style:{background:"red"},data:y,theme:"dark"===r?"darkTheme":""})}),Object(g.jsx)(m.a,{visible:p,setVisible:b.b,title:"Are you sure you want to delete this charger?",noAction:()=>e(Object(b.b)(!1)),noColor:"secondary",noTitle:"Cancel",yesLoading:I.deleteEntity,yesAction:()=>j(v),yesColor:"danger",yesTitle:"Delete",type:"global"})]})]})}},481:function(e,t,r){"use strict";var i=r(1),a=r(129),s=r(2),d=r.n(s),n=r(89),l=r(9);t.a=e=>{const{data:t,title:r}=e;return Object(l.jsx)("div",{className:"content-header row",children:Object(l.jsx)("div",{className:"content-header-left col-md-9 col-12 mb-2 w-100",children:Object(l.jsx)("div",{className:"row breadcrumbs-top",children:Object(l.jsxs)("div",{className:"col-12",children:[r?Object(l.jsx)("h2",{className:"content-header-title float-start mb-0",children:r}):"",Object(l.jsx)("div",{className:"breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12",children:Object(l.jsxs)(n.g,{children:[Object(l.jsx)(n.h,{tag:"li",children:Object(l.jsx)(a.b,{to:"/",children:"Dashboard"})}),t.map(((e,r)=>{const s=e.link?a.b:i.Fragment,c=t.length-1===r;return Object(l.jsx)(n.h,{tag:"li",active:!c,className:d()({"text-primary":!c}),children:Object(l.jsx)(s,{...e.link?{to:e.link}:{},children:e.title})},r)}))]})})]})})})})}},483:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return c}));var i=r(490);const a=i.b({TPid:i.d().required("The TPid field is required."),ID:i.d().required("The ID field is required.")}),s=i.b({TPid:i.d().required("The TPid field is required."),Tenant:i.d().required("The Tenant field is required."),ID:i.d().required("The ID field is required."),ActivationTime:i.d().required("The ActivationTime field is required."),ExpiryTime:i.d().required("The ExpiryTime field is required."),RunID:i.d().required("The RunID field is required."),FilterIDs:i.a().min(1).required("The FilterIDs field is required."),AttributeIDs:i.a().min(1).required("The AttributeIDs field is required.")}),d=i.b({TPid:i.d().required("The TPid field is required."),ID:i.d().required("The ID field is required."),MonthDays:i.d().required("The MonthDays field is required."),Months:i.d().required("The Months field is required."),Time:i.d().required("The Time field is required."),WeekDays:i.d().required("The WeekDays field is required."),Years:i.d().required("The Years field is required.")}),n=i.b({TPid:i.d().required("The TPid field is required."),ID:i.d().required("The ID field is required."),Prefixes:i.a().min(1).required("The Prefixes field is required.")}),l=i.b({TPid:i.d().required("The TPid field is required."),LoadId:i.d().required("The LoadId field is required."),Tenant:i.d().required("The Tenant field is required."),Category:i.d().required("The Category field is required."),Subject:i.d().required("The Subject field is required.")}),c=i.b({Account:i.d().required("The Account field is required."),Tenant:i.d().required("The Tenant field is required."),ActionPlanIDs:i.b().nullable(!1).required("The ActionPlanIDs field is required."),ActionTriggerIDs:i.b().nullable(!1).required("The ActionTriggerIDs field is required."),Balances:i.a().min(1,"You should select a balance.").required("You should select a balance.")})},486:function(e,t,r){"use strict";r(1),r(487);var i=r(9);t.a=()=>Object(i.jsx)("div",{className:"linear-activity",children:Object(i.jsx)("div",{className:"indeterminate"})})},487:function(e,t,r){},511:function(e,t,r){"use strict";var i=r(89),a=r(492),s=r(130),d=r(9);t.a=e=>{let{visible:t,setVisible:r,title:n,noAction:l,noColor:c,noTitle:o,yesLoading:u,yesAction:h,yesColor:b,yesTitle:g,type:j,size:T,children:m}=e;const y=Object(s.b)();return Object(d.jsxs)(i.Q,{isOpen:1===t,size:T||"md",toggle:()=>{"global"===j?y(r(null)):r(null)},className:"modal-dialog-centered",modalClassName:"modal-primary",children:[Object(d.jsx)(i.T,{toggle:()=>{"global"===j?y(r(null)):r(null)},children:n}),Object(d.jsx)(i.R,{children:m}),Object(d.jsxs)(i.S,{className:"w-100 d-flex justify-content-center",children:[Object(d.jsx)(a.a,{onClick:l,style:{width:160},color:c||"danger",children:o}),Object(d.jsx)(a.a,{loading:u,onClick:h,style:{width:160},color:b||"success",children:g})]})]},1)}},644:function(e,t,r){"use strict";var i=r(1),a=r(483),s=r(494),d=r(131),n=r(7),l=r(493),c=r(130),o=r(145);t.a=()=>{const e=Object(c.b)(),t=Object(n.f)(),{httpService:r}=Object(l.a)(),[u,h]=Object(i.useState)({getChargers:!1,getEntityById:!1,createCharger:!1,updateCharger:!1,deleteEntity:!1}),[b,g]=Object(i.useState)([]),j=Object(c.c)((e=>e.app.selectedTpId)),T=async()=>{let e=[];try{var t,i;h({...u,getChargers:!0});const a=await r.post("",{method:"APIerSv1.GetTPChargerIDs",params:[{TPid:j}]});h({...u,getChargers:!1}),null===a||void 0===a||null===(t=a.data)||void 0===t||null===(i=t.result)||void 0===i||i.map((t=>{e.push({ID:t})})),g(e)}catch({err:a,response:s}){h({...u,getChargers:!1})}},m=Object(s.a)({initialValues:{TPid:j,Tenant:"",ID:"",ActivationTime:"",ExpiryTime:"",RunID:"",Weight:0,FilterIDs:[],AttributeIDs:[]},validationSchema:a.c,enableReinitialize:!0,onSubmit:e=>{y(e)}}),y=async e=>{try{h({...u,createCharger:!0});const i=await r.post("",{method:"APIerSv1.SetTPCharger",params:[{TPid:j,Tenant:e.Tenant,ID:e.ID,FilterIDs:e.FilterIDs,ActivationInterval:{ActivationTime:e.ActivationTime,ExpiryTime:e.ExpiryTime},RunID:e.RunID,AttributeIDs:e.AttributeIDs,Weight:e.Weight}]});h({...u,createCharger:!1}),200===i.status&&(d.b.success("Successfully Created!"),t("/rules/chargers"))}catch({err:i,response:a}){h({...u,createCharger:!1})}},I=Object(s.a)({initialValues:{TPid:j,Tenant:"",ID:"",ActivationTime:"",ExpiryTime:"",RunID:"",Weight:0,FilterIDs:[],AttributeIDs:[]},validationSchema:a.c,enableReinitialize:!0,onSubmit:e=>{p(e)}}),p=async e=>{try{h({...u,updateCharger:!0});const i=await r.post("",{method:"APIerSv1.SetTPCharger",params:[{TPid:j,Tenant:e.Tenant,ID:e.ID,FilterIDs:e.FilterIDs,ActivationInterval:{ActivationTime:e.ActivationTime,ExpiryTime:e.ExpiryTime},RunID:e.RunID,AttributeIDs:e.AttributeIDs,Weight:e.Weight}]});h({...u,updateCharger:!1}),200===i.status&&(d.b.success("Successfully Created!"),t("/rules/chargers"))}catch({err:i,response:a}){h({...u,updateCharger:!1})}};return{getChargers:T,getEntityById:async e=>{try{var i;h({...u,getEntityById:!0});const l=await r.post("",{method:"APIerSv1.GetTPCharger",params:[{TPid:j,ID:e}]});var a,s,n;if(h({...u,getEntityById:!1}),"NOT_FOUND"===(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.error))d.b.error(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.error),t("/rules/chargers");else I.setFieldValue("ID",null===l||void 0===l||null===(s=l.data)||void 0===s||null===(n=s.result)||void 0===n?void 0:n.ID)}catch({err:l,response:c}){h({...u,getEntityById:!1})}},createChargerController:m,updateChargerController:I,deleteEntity:async t=>{try{h({...u,deleteEntity:!0});await r.post("",{method:"APIerSv1.RemoveTPCharger",params:[{TPid:j,ID:t}]});h({...u,deleteEntity:!1}),e(Object(o.b)(null)),d.b.success("Successfully Deleted."),T()}catch({err:i,response:a}){h({...u,deleteEntity:!1})}},listData:b,loadings:u}}}}]);
//# sourceMappingURL=53.60d5cc63.chunk.js.map