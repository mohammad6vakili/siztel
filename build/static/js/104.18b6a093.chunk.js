(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[104],{1615:function(e,t,r){"use strict";r.r(t);var a=r(16),n=r(1),c=r(499),i=r(9),s=r(135),l=r(96),u=r(509),o=r(136),d=r(636),b=r(518),h=r(510),j=r(603),f=r(11);t.default=function(){var e=Object(i.f)(),t=Object(s.d)(),r=Object(a.a)(t,1)[0],m=Object(d.a)(),p=m.updateAccountController,T=m.getActionPlans,g=(m.getActionPlansLoading,m.actionPlans,m.getActionTriggers),O=m.getActionTriggersLoading,A=m.actionTriggers,v=m.getAccountById,x=m.loadings,D=Object(o.c)((function(e){return e.app.selectedTpId}));return Object(n.useEffect)((function(){var t=r.get("entity_id");if(t){if(D){var a=t.split(":")[1],n=t.split(":")[0];v(a,n),T(),g()}}else e("/rules/actions")}),[D]),Object(f.jsxs)(n.Fragment,{children:[Object(f.jsx)(c.a,{title:"Update Account",data:[{title:"Update Account"}]}),Object(f.jsx)(l.H,{onSubmit:function(e){e.preventDefault(),window.scroll({top:0,behavior:"smooth"}),p.handleSubmit()},className:"d-flex flex-column align-items-center",children:Object(f.jsxs)(l.l,{className:"w-100",children:[Object(f.jsx)(l.p,{className:"border-bottom",children:Object(f.jsx)(l.v,{children:"New Account Form"})}),Object(f.jsx)(l.m,{className:"pt-2",children:Object(f.jsxs)(l.ib,{children:[Object(f.jsxs)(l.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(f.jsx)(l.N,{className:"form-label",for:"mobile",children:"Account"}),Object(f.jsx)(l.K,{id:"Account",name:"Account",disabled:!0,value:p.values.Account,onChange:p.handleChange,invalid:p.touched.Account&&p.errors.Account}),p.touched.Account&&p.errors.Account?Object(f.jsx)(l.I,{children:p.errors.Account}):null]}),Object(f.jsxs)(l.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(f.jsx)(l.N,{className:"form-label",for:"mobile",children:"Tenant"}),Object(f.jsx)(l.K,{id:"Tenant",name:"Tenant",disabled:!0,value:p.values.Tenant,onChange:p.handleChange,invalid:p.touched.Tenant&&p.errors.Tenant}),p.touched.Tenant&&p.errors.Tenant?Object(f.jsx)(l.I,{children:p.errors.Tenant}):null]}),Object(f.jsxs)(l.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(f.jsx)(l.N,{className:"form-label",for:"mobile",children:"ActionTriggerIDs"}),Object(f.jsx)(b.a,{placeholder:"Select ActionTriggerIDs",isLoading:O,isClearable:!1,options:A,className:"react-select ".concat(p.touched.ActionTriggerIDs&&p.errors.ActionTriggerIDs?"form_error":""),classNamePrefix:"select",theme:h.h,value:p.values.ActionTriggerIDs,onChange:function(e){p.setFieldValue("ActionTriggerIDs",e)}}),p.touched.ActionTriggerIDs&&p.errors.ActionTriggerIDs?Object(f.jsx)(l.I,{style:{display:"block"},children:"The ActionTriggerIDs field is required."}):null]}),Object(f.jsxs)(l.B,{xs:"12",sm:"6",md:"4",className:"mb-1",children:[Object(f.jsx)(l.N,{className:"form-label",for:"mobile",children:"Balances"}),Object(f.jsx)(b.a,{placeholder:"Select Balances",isClearable:!1,options:j.a,isMulti:!0,className:"react-select ".concat(p.touched.Balances&&p.errors.Balances?"form_error":""),classNamePrefix:"select",theme:h.h,value:p.values.Balances,onChange:function(e){p.setFieldValue("Balances",e)}}),p.touched.Balances&&p.errors.Balances?Object(f.jsx)(l.I,{style:{display:"block"},children:"The Balances field is required."}):null]})]})}),Object(f.jsx)(l.n,{className:"border-top d-flex justify-content-center",children:Object(f.jsx)(u.a,{loading:x.createAccount||x.createBalance,type:"submit",color:"primary",style:{minWidth:150},children:"Submit"})})]})})]})}},499:function(e,t,r){"use strict";var a=r(21),n=r(1),c=r(135),i=r(2),s=r.n(i),l=r(96),u=r(11);t.a=function(e){var t=e.data,r=e.title;return Object(u.jsx)("div",{className:"content-header row",children:Object(u.jsx)("div",{className:"content-header-left col-md-9 col-12 mb-2 w-100",children:Object(u.jsx)("div",{className:"row breadcrumbs-top",children:Object(u.jsxs)("div",{className:"col-12",children:[r?Object(u.jsx)("h2",{className:"content-header-title float-start mb-0",children:r}):"",Object(u.jsx)("div",{className:"breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12",children:Object(u.jsxs)(l.g,{children:[Object(u.jsx)(l.h,{tag:"li",children:Object(u.jsx)(c.b,{to:"/",children:"Dashboard"})}),t.map((function(e,r){var i=e.link?c.b:n.Fragment,o=t.length-1===r;return Object(u.jsx)(l.h,{tag:"li",active:!o,className:s()({"text-primary":!o}),children:Object(u.jsx)(i,Object(a.a)(Object(a.a)({},e.link?{to:e.link}:{}),{},{children:e.title}))},r)}))]})})]})})})})}},501:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"g",(function(){return o}));var a=r(508),n=a.b({TPid:a.d().required("The TPid field is required."),ID:a.d().required("The ID field is required.")}),c=a.b({TPid:a.d().required("The TPid field is required."),Tenant:a.d().required("The Tenant field is required."),ID:a.d().required("The ID field is required."),ActivationTime:a.d().required("The ActivationTime field is required."),ExpiryTime:a.d().required("The ExpiryTime field is required."),RunID:a.d().required("The RunID field is required."),FilterIDs:a.a().min(1).required("The FilterIDs field is required."),AttributeIDs:a.a().min(1).required("The AttributeIDs field is required.")}),i=a.b({TPid:a.d().required("The TPid field is required."),ID:a.d().required("The ID field is required."),MonthDays:a.d().required("The MonthDays field is required."),Months:a.d().required("The Months field is required."),Time:a.d().required("The Time field is required."),WeekDays:a.d().required("The WeekDays field is required."),Years:a.d().required("The Years field is required.")}),s=a.b({TPid:a.d().required("The TPid field is required."),ID:a.d().required("The ID field is required."),Prefixes:a.a().min(1).required("The Prefixes field is required.")}),l=a.b({TPid:a.d().required("The TPid field is required."),LoadId:a.d().required("The LoadId field is required."),Tenant:a.d().required("The Tenant field is required."),Category:a.d().required("The Category field is required."),Subject:a.d().required("The Subject field is required.")}),u=a.b({Account:a.d().required("The Account field is required."),Tenant:a.d().required("The Tenant field is required."),ActionPlanIDs:a.b().nullable(!1).required("The ActionPlanIDs field is required."),ActionTriggerIDs:a.b().nullable(!1).required("The ActionTriggerIDs field is required."),Balances:a.a().min(1,"You should select a balance.").required("You should select a balance.")}),o=a.b({Account:a.d().required("The Account field is required."),Tenant:a.d().required("The Tenant field is required."),ActionTriggerIDs:a.b().nullable(!1).required("The ActionTriggerIDs field is required."),Balances:a.a().min(1,"You should select a balance.").required("You should select a balance.")})},603:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(554),n=r.n(a),c=[{label:"1Gigabyte Data Monthly",value:{BalanceType:"*data",Value:1048576e5,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120002",ID:"1G_DATA",ExpiryTime:n()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:"data",SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}},{label:"10 Hour Voice Monthly",value:{BalanceType:"*voice",Value:36e3,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120002",ID:"10HVoice",ExpiryTime:n()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:"voice",SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}},{label:"100000 Unit Monetary",value:{BalanceType:"*monetary",Value:1e5,Balance:{Uuid:"d282703e-64f2-11ee-8c99-0242ac120003",ID:"100KMoney",ExpiryTime:n()().add(1,"months").format("YYYY-MM-DDTHH:mm:ssZ"),Weight:10,DestinationIDs:"",RatingSubject:"",Categories:null,SharedGroups:null,TimingIDs:"*any",Disabled:!1,Blocker:!0},ActionExtraData:null,Cdrlog:!1}}]},636:function(e,t,r){"use strict";var a=r(21),n=r(4),c=r(7),i=r(16),s=r(512),l=r(1),u=r(138),o=r(511),d=r(9),b=r(501),h=r(136),j=r(159),f=r(603);t.a=function(){var e=Object(h.b)(),t=Object(d.f)(),r=Object(o.a)().httpService,m=Object(l.useState)({getAccounts:!1,createAccount:!1,updateAccount:!1,createBalance:!1,deleteAccount:!1,getAccountById:!1}),p=Object(i.a)(m,2),T=p[0],g=p[1],O=Object(l.useState)(!1),A=Object(i.a)(O,2),v=A[0],x=A[1],D=Object(l.useState)(!1),I=Object(i.a)(D,2),q=I[0],y=I[1],B=Object(l.useState)([]),P=Object(i.a)(B,2),S=P[0],w=P[1],N=Object(l.useState)([]),k=Object(i.a)(N,2),C=k[0],Y=k[1],M=Object(l.useState)({Tenant:"cgrates.org"}),V=Object(i.a)(M,2),E=V[0],F=V[1],G=Object(l.useState)([]),H=Object(i.a)(G,2),R=H[0],L=H[1],U=Object(h.c)((function(e){return e.app.selectedTpId})),W=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t,a,c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,x(!0),e.next=5,r.post("",{method:"APIerSv1.GetTPActionPlanIds",params:[{TPid:U}]});case 5:i=e.sent,x(!1),null===i||void 0===i||null===(a=i.data)||void 0===a||null===(c=a.result)||void 0===c||c.map((function(e){t.push({label:e,value:e})})),w(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.err,e.t0.response,x(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t,a,c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,y(!0),e.next=5,r.post("",{method:"APIerSv1.GetTPActionTriggerIds",params:[{TPid:U}]});case 5:i=e.sent,y(!1),null===i||void 0===i||null===(a=i.data)||void 0===a||null===(c=a.result)||void 0===c||c.map((function(e){t.push({label:e,value:e})})),Y(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.err,e.t0.response,y(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),K=Object(s.a)({initialValues:{Tenant:"",Account:"",ActionPlanIDs:null,ActionPlansOverwrite:!1,ActionTriggerIDs:null,ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1,Balances:null},validationSchema:b.a,onSubmit:function(e){Z(e)}}),Z=function(){var e=Object(c.a)(Object(n.a)().mark((function e(t){var c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={Tenant:t.Tenant,Account:t.Account,ActionPlanIDs:[],ActionPlansOverwrite:!1,ActionTriggerIDs:[t.ActionTriggerIDs.value],ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1},t.ActionPlanIDs&&c.ActionPlanIDs.push(t.ActionPlanIDs.value),e.prev=2,g(Object(a.a)(Object(a.a)({},T),{},{createAccount:!0})),e.next=6,r.post("",{method:"APIerSv2.SetAccount",params:[c]});case 6:i=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{createAccount:!1})),200===i.status&&J(t),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{createAccount:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(Object(n.a)().mark((function e(c){var i,s,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],c.Balances.map((function(e){i.push(e.value)})),s={method:"APIerSv1.SetBalances",params:[{Tenant:c.Tenant,Account:c.Account,Balances:i}],id:6},e.prev=3,g(Object(a.a)(Object(a.a)({},T),{},{createBalance:!0})),e.next=7,r.post("",s);case 7:l=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{createBalance:!1})),200===l.status&&(u.b.success("Successfully Created!"),t("/admin/accounts")),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{createBalance:!1}));case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(Object(n.a)().mark((function e(t){var c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={Tenant:""},E.Tenant.length>0&&!t&&(c.Tenant=E.Tenant),e.prev=2,g(Object(a.a)(Object(a.a)({},T),{},{getAccounts:!0})),e.next=6,r.post("",{method:"APIerSv2.GetAccounts",params:[c]});case 6:i=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{getAccounts:!1})),i.data.result?L(i.data.result):L([]),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{getAccounts:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var t=Object(c.a)(Object(n.a)().mark((function t(a,c){var i;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(Object(j.d)(!0)),t.next=4,r.post("",{method:"APIerSv2.GetAccount",params:[{Tenant:a,Account:c}]});case 4:i=t.sent,e(Object(j.d)(!1)),i.data.result&&e(Object(j.c)(i.data.result)),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.err,t.t0.response,e(Object(j.d)(!1));case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r){return t.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(Object(n.a)().mark((function e(c,i){var s,l;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.prev=1,g(Object(a.a)(Object(a.a)({},T),{},{getAccountById:!0})),e.next=5,r.post("",{method:"APIerSv2.GetAccount",params:[{Tenant:i,Account:c}]});case 5:l=e.sent,g(Object(a.a)(Object(a.a)({},T),{},{getAccountById:!1})),l.data.result?($.setFieldValue("Tenant",l.data.result.ID.split(":")[0]),$.setFieldValue("Account",l.data.result.ID.split(":")[1]),$.setFieldValue("ActionTriggerIDs",{label:l.data.result.ActionTriggers[0].ID,value:l.data.result.ActionTriggers[0].ID}),l.data.result.BalanceMap&&(Object.keys(l.data.result.BalanceMap).map((function(e){f.a.find((function(t){t.value.BalanceType===e&&s.push(t)}))})),$.setFieldValue("Balances",s))):t("/admin/accounts"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.err,e.t0.response,g(Object(a.a)(Object(a.a)({},T),{},{getAccountById:!1}));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}(),$=Object(s.a)({initialValues:{Tenant:"",Account:"",ActionPlansOverwrite:!1,ActionTriggerIDs:null,ActionTriggerOverwrite:!1,ExtraOptions:{},ReloadScheduler:!1,Balances:null},validationSchema:b.g,onSubmit:function(e){Z(e)}});return{getAccounts:z,getActionPlans:W,getActionTriggers:_,getAccount:Q,getAccountById:X,createAccountController:K,updateAccountController:$,listData:R,loadings:T,actionPlans:S,actionTriggers:C,getActionPlansLoading:v,getActionTriggersLoading:q,filters:E,setFilters:F}}}}]);
//# sourceMappingURL=104.18b6a093.chunk.js.map